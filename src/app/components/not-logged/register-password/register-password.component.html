<div class="register-password-background">
  <div class="container-fluid vh-100 d-flex align-items-center justify-content-center">
    <div class="row w-100 justify-content-center">
      <div class="col-md-4 col-sm-6 col-8">
        <div class="register-card">
          <h2 class="text-white text-center mb-4">Nova Senha</h2>

          <form>
            <!-- Email Field -->
            <div class="mb-3">
              <div class="input-group">
                <input
                  #emailInput
                  [(ngModel)]="email"
                  name="email"
                  type="email"
                  class="form-control register-input"
                  placeholder="Digite seu e-mail"
                  autocomplete="email"
                  [disabled]="isVerifying"
                >
                <button
                  type="button"
                  class="btn btn-outline-secondary verify-btn"
                  (click)="verifyEmail()"
                  [disabled]="!email || isVerifying"
                >
                  <span *ngIf="!isVerifying">Verificar</span>
                  <span *ngIf="isVerifying">
                    <i class="fas fa-spinner fa-spin"></i>
                  </span>
                </button>
              </div>
              <div class="email-status mt-2" *ngIf="emailVerificationMessage">
                <small [class]="emailVerified ? 'text-success' : 'text-danger'">
                  <i [class]="emailVerified ? 'fas fa-check-circle' : 'fas fa-exclamation-circle'"></i>
                  {{ emailVerificationMessage }}
                </small>
              </div>
            </div>

            <!-- Nova Senha Field -->
            <div class="mb-3">
              <div class="input-group">
                <input
                  #newPassword
                  [type]="showNewPassword ? 'text' : 'password'"
                  class="form-control register-input"
                  placeholder="Nova Senha"
                  autocomplete="new-password"
                  [disabled]="!emailVerified"
                  [class.disabled-input]="!emailVerified"
                >
                <button
                  type="button"
                  class="btn btn-outline-secondary password-toggle"
                  (click)="toggleNewPasswordVisibility()"
                  [disabled]="!emailVerified"
                >
                  <i [class]="showNewPassword ? 'fas fa-eye-slash' : 'fas fa-eye'"></i>
                </button>
              </div>
            </div>

            <!-- Confirmar Senha Field -->
            <div class="mb-4">
              <div class="input-group">
                <input
                  #confirmPassword
                  [type]="showConfirmPassword ? 'text' : 'password'"
                  class="form-control register-input"
                  placeholder="Confirmar Senha"
                  autocomplete="new-password"
                  [disabled]="!emailVerified"
                  [class.disabled-input]="!emailVerified"
                >
                <button
                  type="button"
                  class="btn btn-outline-secondary password-toggle"
                  (click)="toggleConfirmPasswordVisibility()"
                  [disabled]="!emailVerified"
                >
                  <i [class]="showConfirmPassword ? 'fas fa-eye-slash' : 'fas fa-eye'"></i>
                </button>
              </div>
            </div>

            <!-- Salvar Button -->
            <div class="mb-3">
              <button
                type="submit"
                class="btn btn-light w-100 save-btn"
                [disabled]="!emailVerified"
                [class.disabled-btn]="!emailVerified"
              >
                Salvar
              </button>
            </div>

            <!-- Voltar Link -->
            <div class="text-center">
              <a routerLink="" class="text-white-50 back-link">
                <i class="fas fa-arrow-left me-2"></i>Voltar ao Login
              </a>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>
